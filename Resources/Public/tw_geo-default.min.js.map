{"version":3,"sources":["Resources/Public/Elements/Form.default.min.js"],"names":["d","Geoselect","elements","this","slice","call","map","e","GeoselectElement","container","id","search","getElementById","latLon","position","submit","initAutocomplete","initMap","onInitialize","prototype","_this","hasAttribute","getAttribute","searchAutocomplete","google","maps","places","Autocomplete","language","componentRestrictions","country","String","split","item","trim","addListener","handle_autocompletePlaceChanged","bind","el","tagName","parentElement","toLowerCase","toUpperCase","findAncenstorByTagName","addEventListener","event","currentTarget","classList","add","activeElement","preventDefault","value","reset","defaultStyles","featureType","elementType","stylers","color","mapElement","attributes","Map","zoom","center","lat","Number","length","lng","streetViewControl","rotateControl","fullscreenControl","zoomControl","mapTypeControl","zoomControlOptions","ControlPosition","LEFT_TOP","styles","window","googleMapStyles","parentNode","removeChild","geoselect","dispatchEvent","CustomEvent","place","getPlace","geometry","removeAttribute","latitude","location","longitude","setAttribute","setLatLon","markerIconPath","marker","setPosition","getDiv","Marker","icon","url","size","Size","scaledSize","anchor","Point","setCenter","setZoom","detail","setMap","addMyLocationControl","navigator","geolocation","controlDiv","createElement","innerHTML","index","getCurrentPosition","coords","controls","RIGHT_BOTTOM","push","geoselectElements","querySelectorAll","document"],"mappings":"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","file":"tw_geo-default.min.js","sourcesContent":["!function(n){function o(t){this.elements=[].slice.call(t).map(function(t){return new i(t)})}function i(t){return this.container=t||null,this.container&&this.container.id?(this.search=n.getElementById(this.container.id+\"-search\"),this.latLon=n.getElementById(this.container.id+\"-lat-lon\"),this.search&&this.latLon?(this.position=n.getElementById(this.container.id+\"-position\"),this.submit=n.getElementById(this.container.id+\"-submit\"),this.initAutocomplete(),this.map=this.initMap(),void this.onInitialize()):null):null}i.prototype.initAutocomplete=function(){var e=this;if(this.search.hasAttribute(\"autocomplete\")&&\"off\"===this.search.getAttribute(\"autocomplete\"))return null;this.searchAutocomplete=new google.maps.places.Autocomplete(this.search,{language:\"ru\",componentRestrictions:{country:this.container.hasAttribute(\"data-restrict-countries\")?String(this.container.getAttribute(\"data-restrict-countries\")).split(\",\").map(function(t){return t.trim()}):[]}}),this.searchAutocomplete.addListener(\"place_changed\",this.handle_autocompletePlaceChanged.bind(this)),function(t,e){for(;(t=t.parentElement)&&t.tagName!=e.toLowerCase()&&t.tagName!=e.toUpperCase(););return t}(this.search,\"form\").addEventListener(\"submit\",function(t){t.currentTarget.classList.add(\"loading\"),n.activeElement===e.search&&t.preventDefault()}),this.search.addEventListener(\"change\",function(t){t.currentTarget.value||e.reset()})},i.defaultStyles=[{featureType:\"poi\",elementType:\"labels.icon\",stylers:[{color:\"#9d9d9d\"}]},{featureType:\"poi\",elementType:\"labels.text.fill\",stylers:[{color:\"#9d9d9d\"}]}],i.prototype.initMap=function(){var t=n.getElementById(this.container.id+\"-map\");if(!t)return null;var e=this.container.hasAttribute(\"data-lat-lon\")?this.container.attributes[\"data-lat-lon\"].value.split(\",\"):[];return new google.maps.Map(t,{zoom:10,center:{lat:Number(2===e.length?e[0]:t.attributes[\"data-latitude\"].value),lng:Number(2===e.length?e[1]:t.attributes[\"data-longitude\"].value)},streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,zoomControl:!1,mapTypeControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},styles:window.googleMapStyles||i.defaultStyles})},i.prototype.onInitialize=function(){this.position&&this.position.parentNode.removeChild(this.position),this.container.classList.add(\"Geoselect--js\"),(this.container.geoselect=this).container.dispatchEvent(new CustomEvent(\"geoselect_init\"))},i.prototype.handle_autocompletePlaceChanged=function(t){var e=this.searchAutocomplete.getPlace();if(!e||!e.geometry)return this.container.removeAttribute(\"data-lat-lon\"),null;var n=e.geometry.location.lat(),e=e.geometry.location.lng();this.container.setAttribute(\"data-lat-lon\",n+\",\"+e),this.setLatLon(n,e)},i.prototype.setLatLon=function(t,e){var n;this.latLon.value=t+\",\"+e,this.map&&(this.marker?this.marker.setPosition({lat:t,lng:e}):(n=(n=this.map.getDiv().attributes[\"data-marker\"])?n.value:null,this.marker=new google.maps.Marker({position:{lat:t,lng:e},map:this.map,icon:n?{url:n,size:new google.maps.Size(48,68),scaledSize:new google.maps.Size(32,45),anchor:new google.maps.Point(12,34)}:null})),this.map.setCenter({lat:t,lng:e}),this.map.setZoom(10)),this.container.dispatchEvent(new CustomEvent(\"geoselect_change\",{detail:{latitude:t,longitude:e}}))},i.prototype.reset=function(){var t;this.marker&&(this.marker.setMap(null),this.marker=null,t=n.getElementById(this.container.id+\"-map\"),this.map.setCenter({lat:Number(t.attributes[\"data-latitude\"].value),lng:Number(t.attributes[\"data-longitude\"].value)})),this.map.setZoom(6),this.latLon.value&&(this.latLon.value=\"\"),this.search.value&&(this.search.value=\"\"),this.container.removeAttribute(\"data-lat-lon\"),this.container.dispatchEvent(new CustomEvent(\"geoselect_change\",{detail:{}}))},i.prototype.addMyLocationControl=function(){var e=this;if(!navigator.geolocation)return!1;var t=n.createElement(\"div\");t.innerHTML=n.getElementById(\"GoogleMap-MyLocation\").innerHTML,t.index=1,t.addEventListener(\"click\",function(t){navigator.geolocation.getCurrentPosition(function(t){e.setLatLon(t.coords.latitude,t.coords.longitude),e.search.value=t.coords.latitude+\",\"+t.coords.longitude,e.map.setZoom(14)})}),this.map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(t)},n.addEventListener(\"DOMContentLoaded\",function(t){var e=n.querySelectorAll(\".Geoselect\");e.length&&new o(e)})}(document);"]}